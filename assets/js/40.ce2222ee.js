(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{494:function(s,a,t){"use strict";t.r(a);var n=t(2),e=Object(n.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"ubuntu安装mongodb"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ubuntu安装mongodb"}},[s._v("#")]),s._v(" Ubuntu安装MongoDB")]),s._v(" "),a("ol",[a("li",[a("h3",{attrs:{id:"安装mongodb"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装mongodb"}},[s._v("#")]),s._v(" 安装MongoDB")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 1. 更新")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" update\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 2. 安装")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" mongodb-org\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 3. 添加至开机自启(可不配置)")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("enable")]),s._v(" mongod\n")])])])]),s._v(" "),a("li",[a("h3",{attrs:{id:"常用指令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#常用指令"}},[s._v("#")]),s._v(" 常用指令")]),s._v(" "),a("ul",[a("li",[a("h4",{attrs:{id:"查看运行状态"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查看运行状态"}},[s._v("#")]),s._v(" 查看运行状态")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v("  mongodb status\n")])])])]),s._v(" "),a("li",[a("h4",{attrs:{id:"启动服务"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#启动服务"}},[s._v("#")]),s._v(" 启动服务")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v("  mongodb start\n")])])])]),s._v(" "),a("li",[a("h4",{attrs:{id:"停止服务"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#停止服务"}},[s._v("#")]),s._v(" 停止服务")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v("  mongodb stop\n")])])])]),s._v(" "),a("li",[a("h4",{attrs:{id:"重启服务"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#重启服务"}},[s._v("#")]),s._v(" 重启服务")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v("  mongodb restart\n")])])]),a("p",[s._v("或者")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" mongod "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-auth")]),s._v("\n")])])])])]),s._v(" "),a("ol",{attrs:{start:"3"}},[a("li",[a("h3",{attrs:{id:"相关配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#相关配置"}},[s._v("#")]),s._v(" 相关配置")])])]),s._v(" "),a("ul",[a("li",[a("h4",{attrs:{id:"配置远程连接"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置远程连接"}},[s._v("#")]),s._v(" 配置远程连接")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /etc/mongod.conf\n")])])]),a("p",[s._v("将 bind_ip: 127.0.0.1 修改为：bind_ip: 0.0.0.0 即可")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("logappend")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true\n\nbind_ip "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#port = 27017")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Enable journaling, http://www.mongodb.org/display/DOCS/Journaling")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("journal")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Enables periodic logging of CPU utilization and I/O wait")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#cpu = true")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Turn on/off security.  Off is currently the default")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#noauth = true")]),s._v("\nauth "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Verbose logging output.")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#verbose = true")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n\n")])])]),a("p",[s._v("修改完:wq保存退出并且重启服务即可")])]),s._v(" "),a("li",[a("h4",{attrs:{id:"添加超级管理员"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#添加超级管理员"}},[s._v("#")]),s._v(" 添加超级管理员")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("mongo   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 进入mongo shell")]),s._v("\n")])])]),a("p",[s._v("进入mongo内")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" show dbs   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 显示所有数据库")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" use admin  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 进入admin数据库")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" db.createUser"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    user: "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"admin"')]),s._v(",\n    pwd: "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"abc123"')]),s._v(",\n    roles: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" role: "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"userAdminAnyDatabase"')]),s._v(", db: "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"admin"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建一个用户，身份是超级管理员")]),s._v("\n")])])]),a("p",[s._v("完成后会提示Successfully added user相关信息")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" db.auth"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"admin"')]),s._v(","),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"abc123"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n")])])]),a("p",[s._v("若返回为1，则认证成功！现在，我们超级管理员也创建好了，可以为其他数据库创建用户了")]),s._v(" "),a("p",[s._v("MongoDB基本的角色：\n1."),a("strong",[s._v("数据库用户角色")]),s._v("：read、readWrite;\n2."),a("strong",[s._v("数据库管理角色")]),s._v("：dbAdmin、dbOwner、userAdmin；\n3."),a("strong",[s._v("集群管理角色")]),s._v("：clusterAdmin、clusterManager、clusterMonitor、hostManager；\n4."),a("strong",[s._v("备份恢复角色")]),s._v("：backup、restore；\n5."),a("strong",[s._v("所有数据库角色")]),s._v("：readAnyDatabase、readWriteAnyDatabase、userAdminAnyDatabase、dbAdminAnyDatabase\n6."),a("strong",[s._v("超级用户角色")]),s._v("：root\n还有几个角色间接或直接提供了系统超级用户的访问（dbOwner 、userAdmin、userAdminAnyDatabase）")]),s._v(" "),a("p",[s._v("其中MongoDB默认是没有开启用户认证的，也就是说游客也拥有超级管理员的权限。userAdminAnyDatabase：有分配角色和用户的权限，但没有查写的权限")])])])])])])}),[],!1,null,null,null);a.default=e.exports}}]);
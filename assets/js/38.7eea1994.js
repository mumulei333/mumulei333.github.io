(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{492:function(e,t,s){"use strict";s.r(t);var r=s(2),a=Object(r.a)({},(function(){var e=this,t=e._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"ubuntu固定内网ip"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ubuntu固定内网ip"}},[e._v("#")]),e._v(" Ubuntu固定内网IP")]),e._v(" "),t("blockquote",[t("p",[e._v("最近有用到虚拟机的原因，自己在电脑开了几个ubuntu的虚拟机，在用到frp远程操作的时候因为内网ip一直变动的原因这边需要用到固定内网IP")])]),e._v(" "),t("h2",{attrs:{id:"步骤一"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#步骤一"}},[e._v("#")]),e._v(" "),t("strong",[e._v("步骤一")])]),e._v(" "),t("p",[e._v("使用"),t("code",[e._v("ip addr")]),e._v("查看目前内网ip地址，这里可以看到目前地址是192.168.5.139，该地址是内网分配的地址，无意义。")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("mumu@ubuntu_01:/$ ip addr\n1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000\n    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00\n    inet 127.0.0.1/8 scope host lo\n       valid_lft forever preferred_lft forever\n    inet6 ::1/128 scope host \n       valid_lft forever preferred_lft forever\n2: ens33: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc fq_codel state UP group default qlen 1000\n    link/ether 00:0c:29:a9:9a:a8 brd ff:ff:ff:ff:ff:ff\n    inet 192.168.5.139/24 brd 192.168.5.255 scope global secondary dynamic ens33\n       valid_lft 903sec preferred_lft 903sec\n    inet6 fe80::20c:29ff:fea9:9aa8/64 scope link \n       valid_lft forever preferred_lft forever\n3: docker0: <NO-CARRIER,BROADCAST,MULTICAST,UP> mtu 1500 qdisc noqueue state DOWN group default \n    link/ether 02:42:99:74:02:a6 brd ff:ff:ff:ff:ff:ff\n    inet 172.17.0.1/16 brd 172.17.255.255 scope global docker0\n       valid_lft forever preferred_lft forever\n    inet6 fe80::42:99ff:fe74:2a6/64 scope link \n       valid_lft forever preferred_lft forever\n")])])]),t("p",[e._v("修改netplan网络配置文件")]),e._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("vim")]),e._v(" /etc/netplan/50-cloud-init.yaml\n")])])]),t("p",[e._v("这里的"),t("code",[e._v("192.168.5.xxx")]),e._v("是你需要固定的IP，可以随意给你想要的ip哈哈哈哈")]),e._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# This file is generated from information provided by the datasource.  Changes ")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# to it will not persist across an instance reboot.  To disable cloud-init's")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# network configuration capabilities, write a file")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# /etc/cloud/cloud.cfg.d/99-disable-network-config.cfg with the following:")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# network: {config: disabled}")]),e._v("\nnetwork:\n    ethernets:\n        ens33:\n            dhcp4: "),t("span",{pre:!0,attrs:{class:"token boolean"}},[e._v("true")]),e._v("\n            addresses: "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("192.168")]),e._v(".5.xxx/24"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v("\n    version: "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("2")]),e._v("\n")])])]),t("p",[e._v("修改完保持退出:wq")]),e._v(" "),t("h2",{attrs:{id:"步骤二"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#步骤二"}},[e._v("#")]),e._v(" "),t("strong",[e._v("步骤二")])]),e._v(" "),t("p",[e._v("完成修改后，使用以下命令生效")]),e._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" netplan apply\n")])])]),t("p",[e._v("这里可以使用"),t("code",[e._v("ip addr")]),e._v("查看"),t("code",[e._v("ens33")]),e._v("最新修改的内网地址192.168.5.111了")]),e._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[e._v("mumu@ubuntu_01:/$ "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("ip")]),e._v(" addr\n"),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("1")]),e._v(": lo: "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("LOOPBACK,UP,LOWER_UP"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" mtu "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("65536")]),e._v(" qdisc noqueue state UNKNOWN group default qlen "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("1000")]),e._v("\n    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00\n    inet "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("127.0")]),e._v(".0.1/8 scope "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("host")]),e._v(" lo\n       valid_lft forever preferred_lft forever\n    inet6 ::1/128 scope "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("host")]),e._v(" \n       valid_lft forever preferred_lft forever\n"),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("2")]),e._v(": ens33: "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("BROADCAST,MULTICAST,UP,LOWER_UP"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" mtu "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("1500")]),e._v(" qdisc fq_codel state UP group default qlen "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("1000")]),e._v("\n    link/ether 00:0c:29:a9:9a:a8 brd ff:ff:ff:ff:ff:ff\n    inet "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("192.168")]),e._v(".5.111/24 brd "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("192.168")]),e._v(".5.255 scope global ens33\n       valid_lft forever preferred_lft forever\n    inet "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("192.168")]),e._v(".5.139/24 brd "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("192.168")]),e._v(".5.255 scope global secondary dynamic ens33\n       valid_lft 903sec preferred_lft 903sec\n    inet6 fe80::20c:29ff:fea9:9aa8/64 scope "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("link")]),e._v(" \n       valid_lft forever preferred_lft forever\n"),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("3")]),e._v(": docker0: "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("NO-CARRIER,BROADCAST,MULTICAST,UP"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" mtu "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("1500")]),e._v(" qdisc noqueue state DOWN group default \n    link/ether 02:42:99:74:02:a6 brd ff:ff:ff:ff:ff:ff\n    inet "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("172.17")]),e._v(".0.1/16 brd "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("172.17")]),e._v(".255.255 scope global docker0\n       valid_lft forever preferred_lft forever\n    inet6 fe80::42:99ff:fe74:2a6/64 scope "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("link")]),e._v(" \n       valid_lft forever preferred_lft forever\n")])])]),t("p",[e._v("配置完成你又可以开心的玩耍了~！^_^")])])}),[],!1,null,null,null);t.default=a.exports}}]);
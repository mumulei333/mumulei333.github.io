(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{655:function(s,t,a){"use strict";a.r(t);var e=a(4),n=Object(e.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"ubuntu安装mysql"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ubuntu安装mysql"}},[s._v("#")]),s._v(" Ubuntu安装Mysql")]),s._v(" "),a("ol",[a("li",[a("h3",{attrs:{id:"安装mysql"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装mysql"}},[s._v("#")]),s._v(" 安装Mysql")])])]),s._v(" "),a("p",[s._v("目前Ubuntu下安装Mysql有两种方式，一种是源码包进行安装，另一种是APT安装，相比而言APT安装比较简单，因此也推荐APT进行安装。")]),s._v(" "),a("ul",[a("li",[a("h4",{attrs:{id:"apt安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#apt安装"}},[s._v("#")]),s._v(" APT安装")]),s._v(" "),a("p",[s._v("APT安装时，需要安装两个软件，分别为Mysql客户端和服务，代码如下：\n首先安装客户端工具mysql-client")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" mysql-client  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#也可表示为mysql-client-x.x来指定版本，例如mysql-client-5.7")]),s._v("\n")])])]),a("p",[s._v("再安装mysql服务mysql-server")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" mysql-server  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#也可表示为mysql-server-x.x来指定版本，例如mysql-server-5.7")]),s._v("\n")])])]),a("p",[s._v("一些旧的版本可能会再安装过程中需要你设置root初始密码")])]),s._v(" "),a("li",[a("h4",{attrs:{id:"源码包安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#源码包安装"}},[s._v("#")]),s._v(" 源码包安装")]),s._v(" "),a("p",[s._v("源码包安装比较复杂这里就不介绍了，需要的可以百度一哈")])])]),s._v(" "),a("ol",{attrs:{start:"2"}},[a("li",[a("h3",{attrs:{id:"常用指令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#常用指令"}},[s._v("#")]),s._v(" 常用指令")]),s._v(" "),a("ul",[a("li",[a("h4",{attrs:{id:"查看运行状态"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查看运行状态"}},[s._v("#")]),s._v(" 查看运行状态")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" mysql status\n")])])])]),s._v(" "),a("li",[a("h4",{attrs:{id:"启动服务"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#启动服务"}},[s._v("#")]),s._v(" 启动服务")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" mysql start\n")])])])]),s._v(" "),a("li",[a("h4",{attrs:{id:"关闭服务"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#关闭服务"}},[s._v("#")]),s._v(" 关闭服务")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" mysql stop\n")])])])]),s._v(" "),a("li",[a("h4",{attrs:{id:"重启服务"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#重启服务"}},[s._v("#")]),s._v(" 重启服务")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" mysql restart\n")])])])])])]),s._v(" "),a("li",[a("h3",{attrs:{id:"卸载mysql"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#卸载mysql"}},[s._v("#")]),s._v(" 卸载Mysql")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#也可表示为mysql-server-x.x来指定版本，例如mysql-server-5.7")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" autoremove --purge mysql-server\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" remove mysql-common\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" -rf /etc/mysql/  /var/lib/mysql\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#清理残留数据")]),s._v("\ndpkg -l "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" ^rc"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'{print "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$2")]),s._v("}'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("xargs")]),s._v(" dpkg -P  \n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt")]),s._v(" autoremove\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt")]),s._v(" autoreclean\n")])])]),a("p",[s._v("查看是否卸载成功")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("netstat")]),s._v(" -tap "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" mysql\n")])])])]),s._v(" "),a("li",[a("h3",{attrs:{id:"设置root密码"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#设置root密码"}},[s._v("#")]),s._v(" 设置Root密码")]),s._v(" "),a("p",[s._v("安装时如果没有设置初始密码的话，使用该命令查看默认密码")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" /etc/mysql/debian.cnf\n")])])]),a("p",[s._v("运行后得到以下内容，获取其中client密码")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Automatically generated for Debian scripts. DO NOT TOUCH!")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("client"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("host")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" localhost\nuser     "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" debian-sys-maint\npassword "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" edPL7A8WJ8mXLOTM\nsocket   "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" /var/run/mysqld/mysqld.sock\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("mysql_upgrade"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("host")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" localhost\nuser     "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" debian-sys-maint\npassword "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" edPL7A8WJ8mXLOTM\nsocket   "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" /var/run/mysqld/mysqld.sock\n")])])]),a("p",[s._v("使用client的默认密码登入mysql")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" mysql -u root -p\n")])])]),a("p",[s._v('进入mysql后更新root密码，这里注意每一句命令后的";"不要漏掉')]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("use mysql"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nupdate user "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("authentication_string")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("password"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"需要设置的密码"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" where "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("user")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"root"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nflush privileges"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),a("p",[s._v("大功告成！使用ctrl+D退出")])]),s._v(" "),a("li",[a("h3",{attrs:{id:"设置远程访问"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#设置远程访问"}},[s._v("#")]),s._v(" 设置远程访问")])])]),s._v(" "),a("p",[s._v("登入mysql,如何获取密码可以看上一小节")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" mysql -u root -p\n")])])]),a("p",[s._v("登入后执行")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("GRANT ALL PRIVILEGES ON *.* TO "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'root'")]),s._v("@"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'%'")]),s._v("IDENTIFIED BY "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'远程访问密码'")]),s._v(" WITH GRANT OPTION"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nflush privileges"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),a("p",[s._v("其中 ‘root’@’%’ 中的root表示远程访问数据库的账户，%表示所有IP均可访问，'远程访问密码’表示远程访问mysql时需要的密码")]),s._v(" "),a("p",[s._v("修改mysql配置文件")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /etc/mysql/mysql.conf.d/mysqld.cnf\n")])])]),a("p",[s._v("注释掉bind-address这一行")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("user            "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" mysql\npid-file        "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" /var/run/mysqld/mysqld.pid\nsocket          "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" /var/run/mysqld/mysqld.sock\nport            "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3306")]),s._v("\nbasedir         "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" /usr\ndatadir         "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" /var/lib/mysql\ntmpdir          "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" /tmp\nlc-messages-dir "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" /usr/share/mysql\nskip-external-locking\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Instead of skip-networking the default is now to listen only on")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# localhost which is more compatible and is not less secure.")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# bind-address          = 127.0.0.1    注释掉这一行")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# * Fine Tuning")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\nkey_buffer_size         "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 16M\nmax_allowed_packet      "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 16M\nthread_stack            "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 192K\nthread_cache_size       "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v("\n\n")])])]),a("p",[s._v("修改完:wq退出")]),s._v(" "),a("p",[s._v("重启mysql服务")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" mysql restart\n")])])]),a("p",[s._v("大功告成！快去试试吧！")])])}),[],!1,null,null,null);t.default=n.exports}}]);